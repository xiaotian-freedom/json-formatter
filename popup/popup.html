<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>锦衣JSON</title>
  <link rel="stylesheet" href="popup.css">
  <link rel="stylesheet" href="../styles/themes.css">
  <link rel="stylesheet" href="../styles/animations.css">
  <link rel="stylesheet" href="../styles/glass-buttons.css">
</head>

<body class="light-theme">
  <div class="container">
    <header>
      <h1 data-i18n="appName">锦衣JSON</h1>
      <div class="toolbar">
        <button id="searchBtn" class="icon-btn" title="搜索">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none"
            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
            <circle cx="11" cy="11" r="8"></circle>
            <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
          </svg>
        </button>
        <div class="language-selector">
          <select id="languageSelect">
            <option value="zh_CN">中文</option>
            <option value="en">English</option>
          </select>
        </div>
        <div class="toolbar-spacer"></div>
        <div class="auto-format-toggle">
          <label class="switch-label" data-i18n="autoFormat">自动格式化</label>
          <label class="toggle-switch">
            <input type="checkbox" id="autoFormatToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <!-- 修改JSONPath显示切换按钮，去掉checked属性 -->
        <div class="json-path-toggle">
          <label class="switch-label" data-i18n="showJsonPath">显示路径</label>
          <label class="toggle-switch">
            <input type="checkbox" id="jsonPathToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <!-- 新增打开方式开关 -->
        <div class="open-mode-toggle">
          <label class="switch-label" data-i18n="openInNewTab">新标签页打开</label>
          <label class="toggle-switch">
            <input type="checkbox" id="openModeToggle">
            <span class="toggle-slider"></span>
          </label>
        </div>

        <!-- 切换主题 -->
        <label class="theme-switch">
          <input type="checkbox" id="themeToggle">
          <span class="slider round"></span>
        </label>
      </div>
    </header>

    <div class="content-container">
      <div class="input-area">
        <textarea id="jsonInput" data-i18n-placeholder="inputPlaceholder" placeholder="请输入或粘贴JSON数据..."></textarea>
        <button id="formatBtn" data-i18n="formatJson">格式化</button>
      </div>

      <div class="output-area">
        <div id="jsonViewer"></div>
        <div class="output-actions">
          <button id="tsModelBtn" class="glass-btn" data-i18n="generateTsModel" title="生成TypeScript模型">TS模型</button>
          <button id="javaModelBtn" class="glass-btn" data-i18n="generateJavaModel" title="生成Java模型">Java模型</button>
          <button id="kotlinModelBtn" class="glass-btn" data-i18n="generateKotlinModel"
            title="生成Kotlin模型">Kotlin模型</button>
          <button id="copyBtn" class="glass-btn" data-i18n="copy" title="复制">复制</button>
          <button id="downloadBtn" class="glass-btn" data-i18n="download" title="下载">下载</button>
          <button id="expandAllBtn" class="glass-btn" data-i18n="expand" title="全部展开">展开</button>
          <button id="collapseAllBtn" class="glass-btn" data-i18n="collapse" title="全部折叠">折叠</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 搜索弹窗 -->
  <div id="searchModal" class="search-modal">
    <div class="search-container glass-effect">
      <div class="search-header">
        <h3 data-i18n="searchJson">搜索JSON</h3>
        <button id="closeSearchBtn" class="close-btn">×</button>
      </div>
      <div class="search-body">
        <div class="search-input-container">
          <input type="text" id="searchInput" data-i18n-placeholder="searchPlaceholder" placeholder="输入搜索关键词...">
          <button id="prevResultBtn" class="nav-btn" title="上一个结果">↑</button>
          <button id="nextResultBtn" class="nav-btn" title="下一个结果">↓</button>
        </div>
        <div class="search-info">
          <span id="resultCount" data-i18n="noResults">未找到结果</span>
          <label class="case-sensitive">
            <input type="checkbox" id="caseSensitiveToggle">
            <span data-i18n="caseSensitive">区分大小写</span>
          </label>
        </div>
      </div>
    </div>
  </div>

  <script src="../js/utilities.js"></script>
  <script src="../scripts/json-viewer.js"></script>
  <script src="../scripts/i18n.js"></script>
  <script src="../scripts/image-preview.js"></script>
  <script src="../scripts/ts-model-generator.js"></script>
  <script src="../scripts/ts-model-dialog.js"></script>
  <script src="../scripts/java-model-generator.js"></script>
  <script src="../scripts/java-model-dialog.js"></script>
  <script src="../scripts/kotlin-model-generator.js"></script>
  <script src="../scripts/kotlin-model-dialog.js"></script>
  <script src="popup.js"></script>
</body>

</html>